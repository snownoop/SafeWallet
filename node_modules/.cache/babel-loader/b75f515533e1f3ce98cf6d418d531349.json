{"ast":null,"code":"var _jsxFileName = \"/Users/Raid/Mastering_Ethereum/DevelopingFirstDapp/Testing/src/App.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport { MULTISIG_ABI, MULTISIG_ADDRESS } from './config';\nimport TodoList from './todoList';\n\nclass App extends Component {\n  componentWillMount() {\n    this.loadBlockchainData();\n  }\n\n  async loadBlockchainData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:7545\");\n    const network = await web3.eth.net.getNetworkType();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    const multisig = new web3.eth.Contract(MULTISIG_ABI, MULTISIG_ADDRESS);\n    this.setState({\n      multisig\n    });\n    /*const taskCount = await todoList.methods.taskCount().call();\n    this.setState({ taskCount });\n    for (var i = 1; i <= taskCount; i++) {\n      const task = await todoList.methods.tasks(i).call()\n      this.setState({\n        tasks: [...this.state.tasks, task]\n      })\n    }*/\n\n    this.setState({\n      loading: false\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      balance: '',\n      loading: true\n    };\n    this.checkBalance = this.checkBalance.bind(this);\n  }\n\n  createTask(content) {\n    this.setState({\n      loading: true\n    });\n    this.state.todoList.methods.createTask(content).send({\n      from: this.state.account\n    }).once('receipt', receipt => {\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  checkBalance(address) {\n    this.setState({\n      loading: true\n    });\n    this.state.multisig.methods.balances().call(this.state.account, {\n      from: this.state.account\n    }).once('result', result => {\n      this.setState({\n        loading: false,\n        balance: result.toString()\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"main\", {\n      role: \"main\",\n      className: \"col-lg-12 d-flex justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(\"div\", {\n      id: \"loader\",\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Loading...\")) : React.createElement(TodoList, {\n      checkBalance: this.checkBalance,\n      address: this.state.account,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Raid/Mastering_Ethereum/DevelopingFirstDapp/Testing/src/App.js"],"names":["React","Component","Web3","MULTISIG_ABI","MULTISIG_ADDRESS","TodoList","App","componentWillMount","loadBlockchainData","web3","givenProvider","network","eth","net","getNetworkType","accounts","getAccounts","setState","account","multisig","Contract","loading","constructor","props","state","balance","checkBalance","bind","createTask","content","todoList","methods","send","from","once","receipt","address","balances","call","result","toString","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport { MULTISIG_ABI, MULTISIG_ADDRESS } from './config';\nimport TodoList from './todoList';\n\nclass App extends Component {\n\n  componentWillMount() {\n    this.loadBlockchainData();\n  }\n  async loadBlockchainData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:7545\");\n    const network = await web3.eth.net.getNetworkType();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({ account: accounts[0] });\n    const multisig = new web3.eth.Contract(MULTISIG_ABI, MULTISIG_ADDRESS);\n    this.setState({ multisig });\n    /*const taskCount = await todoList.methods.taskCount().call();\n    this.setState({ taskCount });\n    for (var i = 1; i <= taskCount; i++) {\n      const task = await todoList.methods.tasks(i).call()\n      this.setState({\n        tasks: [...this.state.tasks, task]\n      })\n    }*/\n    this.setState({ loading : false });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { \n      account: '',\n      balance: '',\n      loading: true\n    };\n    this.checkBalance = this.checkBalance.bind(this);\n  }\n\n  createTask(content) {\n    this.setState({ loading: true })\n    this.state.todoList.methods.createTask(content).send({ from: this.state.account })\n    .once('receipt', (receipt) => {\n      this.setState({ loading: false })\n    })\n  }\n\n  checkBalance(address) {\n    this.setState({ loading: true })\n    this.state.multisig.methods.balances().call(this.state.account, { from: this.state.account })\n    .once('result', (result) => {\n      this.setState({ loading: false , balance : result.toString()})\n    })\n  }\n\n\n  render() {\n    return (\n      <div>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <main role=\"main\" className=\"col-lg-12 d-flex justify-content-center\">\n              { this.state.loading \n                ? <div id=\"loader\" className=\"text-center\"><p className=\"text-center\">Loading...</p></div> \n                : <TodoList \n                checkBalance={this.checkBalance}\n                address={this.state.account} \n                /> \n              }\n            </main>\n          </div>\n        </div>\n    \n      </div>  \n      );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}